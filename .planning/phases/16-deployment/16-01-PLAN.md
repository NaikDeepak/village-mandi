---
phase: 16-deployment
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [server/scripts/seed.ts, server/package.json, vercel.json, .env.production.example]
autonomous: true
---

<objective>
Configure production-ready database and environment for Vercel deployment.

Purpose: Ensure the application has a clean, seeded database and proper environment variables for the production environment.
Output: Seeding script, production environment template, and updated deployment configuration.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/STACK.md
@server/prisma/schema.prisma
@api/index.ts
</context>

<tasks>
<task type="auto">
  <name>Task 1: Create production seed script</name>
  <files>server/scripts/seed.ts, server/package.json</files>
  <action>Create a robust seed script that idempotently creates default Admin user, sample Hub, and initial system state. Add 'seed' script to server/package.json. Ensure it handles existing data gracefully (upsert).</action>
  <verify>Run `npm run seed` in server directory and verify data in local DB</verify>
  <done>Seed script executes successfully and populates DB</done>
</task>

<task type="auto">
  <name>Task 2: Create production environment template</name>
  <files>.env.production.example</files>
  <action>Create a template for production environment variables required by Vercel. Include DATABASE_URL (Supabase connection pool), JWT_SECRET, ADMIN_PASSWORD, and other keys from server/.env.example and web/.env.example.</action>
  <verify>Check file exists and contains all necessary keys</verify>
  <done>Template file created with clear instructions</done>
</task>

<task type="auto">
  <name>Task 3: Optimize Vercel configuration</name>
  <files>vercel.json</files>
  <action>Review and update vercel.json to ensure correct build commands, output directory, and serverless function configuration. Ensure 'build' command runs 'npm install' and 'prisma generate'.</action>
  <verify>Validate JSON syntax</verify>
  <done>vercel.json configured for monorepo deployment</done>
</task>
</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run seed` works locally
- [ ] .env.production.example covers all required vars
- [ ] vercel.json aligns with monorepo structure
</verification>

<success_criteria>
- Seed script created and tested
- Production env vars documented
- Vercel config optimized
</success_criteria>

<output>
After completion, create `.planning/phases/16-deployment/16-01-SUMMARY.md`
</output>
