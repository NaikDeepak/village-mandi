---
phase: 21-app-check-integration
plan: 02
type: execute
wave: 2
depends_on: ["21-01"]
files_modified: []
autonomous: false
must_haves:
  truths:
    - "Legitimate client requests succeed with enforcement ON"
    - "Direct curl requests fail with 401"
  artifacts: []
  key_links: []
---

<objective>
Verify App Check enforcement and security posture.

Purpose: Confirm that the system actually blocks unauthorized access while allowing the web app.
Output: Validated security configuration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>App Check Integration</what-built>
  <how-to-verify>
    1. Set `APP_CHECK_ENFORCED=true` in backend `.env` (or Vercel).
    2. Start backend and frontend.
    3. Visit Buyer Login page and attempt to log in.
    4. **Expected Success**: Should proceed (token sent).
    5. Attempt `curl -X POST http://localhost:3000/api/auth/request-otp`.
    6. **Expected Failure**: Should return 401/403.
  </how-to-verify>
  <resume-signal>Type "approved" if behavior matches, or describe issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Manual verification passed
</verification>

<success_criteria>
- Security enforcement verified
</success_criteria>

<output>
After completion, create `.planning/phases/21-app-check-integration/21-02-SUMMARY.md`
</output>
