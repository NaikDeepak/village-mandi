---
phase: 19-client-auth
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [web/package.json, web/src/lib/firebase.ts, web/src/hooks/usePhoneAuth.ts]
autonomous: true
must_haves:
  truths:
    - "Firebase SDK is initialized"
    - "usePhoneAuth hook manages confirmation result"
    - "Resend cooldown prevents abuse"
  artifacts:
    - path: "web/src/lib/firebase.ts"
      provides: "Firebase App singleton"
    - path: "web/src/hooks/usePhoneAuth.ts"
      provides: "Phone auth logic"
  key_links: []
---

<objective>
Implement core client-side Firebase Auth logic.

Purpose: Provide the foundational Firebase instance and React hook for phone authentication.
Output: Initialized SDK and reusable auth hook.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-client-auth/19-CONTEXT.md
@web/package.json
</context>

<tasks>

<task type="auto">
  <name>Install Dependencies</name>
  <files>web/package.json</files>
  <action>
    Install `firebase` in the web workspace.
    Run `npm install firebase --workspace=web`.
  </action>
  <verify>grep "firebase" web/package.json</verify>
  <done>Firebase SDK installed</done>
</task>

<task type="auto">
  <name>Initialize Firebase</name>
  <files>web/src/lib/firebase.ts</files>
  <action>
    Create Firebase initialization file.
    - Import `initializeApp` from `firebase/app`.
    - Import `getAuth` from `firebase/auth`.
    - Use `import.meta.env.VITE_FIREBASE_*` variables.
    - Export `auth` instance.
  </action>
  <verify>File exists and compiles</verify>
  <done>Firebase initialized</done>
</task>

<task type="auto">
  <name>Implement usePhoneAuth Hook</name>
  <files>web/src/hooks/usePhoneAuth.ts</files>
  <action>
    Create a hook that handles:
    - `requestOtp(phone: string, recaptchaVerifier: RecaptchaVerifier)`: Calls `signInWithPhoneNumber`.
    - `verifyOtp(code: string)`: Confirms the result.
    - `confirmationResult` state.
    - `cooldown`: 60s timer state for resend.
    - Error handling.
  </action>
  <verify>File exists and compiles</verify>
  <done>Auth logic encapsulated in hook</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` in web succeeds
</verification>

<success_criteria>
- Firebase initialized with env vars
- Hook handles OTP lifecycle
</success_criteria>

<output>
After completion, create `.planning/phases/19-client-auth/19-01-SUMMARY.md`
</output>
