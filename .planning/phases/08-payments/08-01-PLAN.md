# Plan 08-01: Payment Logging API

Implement the backend logic for logging commitment and final payments by admins.

## User Stories
- **Admin**: "I want to log a buyer's 10% commitment payment so their order status moves to COMMITMENT_PAID."
- **Admin**: "I want to log the final balance payment after procurement so the order status moves to FULLY_PAID."

## Technical Tasks
1. **Schema Definition**:
   - Create `server/src/schemas/payments.ts` with `logPaymentSchema`.
2. **Backend API**:
   - Create `server/src/routes/payments.ts`.
   - Implement `POST /orders/:id/payments` (Admin only).
   - Implement logic to update `Order.status` based on payment stage.
   - Ensure transactional integrity (create Payment + update Order + log Event).
3. **Integration Tests**:
   - Create `server/src/routes/payments.test.ts`.
   - Test commitment payment flow.
   - Test final payment flow.
   - Test validation (wrong order, invalid status).
4. **Shared Types**:
   - Update `web/src/types/index.ts` and `shared` types if necessary.

## Success Criteria
- [x] Admin can log 10% payment and order moves to `COMMITMENT_PAID`.
- [x] Admin can log final payment and order moves to `FULLY_PAID`.
- [x] Non-admins cannot log payments.
- [x] Audit logs (EventLog) created for all actions.
- [x] 100% test coverage for payment status transitions.
