---
phase: 07-ordering
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified: [web/src/pages/buyer/ShopPage.tsx, web/src/components/shop/ProductCard.tsx, web/src/lib/api.ts]
autonomous: true
---

<objective>
Build Buyer Storefront for browsing products in the current open batch.

Purpose: Provide buyers with a visual interface to browse products grouped by farmer.
Output: Responsive Shop page.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-ordering/07-01-SUMMARY.md
</context>

<tasks>
<task type="auto">
  <name>Task 1: Update API Client</name>
  <files>web/src/lib/api.ts</files>
  <action>Add `ordersApi` methods (create, getMyOrders). Update `batchesApi.getCurrent` and `batchProductsApi.getByBatch` to handle Buyer role (no changes needed if backend handles it, but verify types).</action>
  <verify>Build succeeds</verify>
  <done>API methods available</done>
</task>

<task type="auto">
  <name>Task 2: Shop Page Structure</name>
  <files>web/src/pages/buyer/ShopPage.tsx</files>
  <action>
    Fetch current batch on mount.
    If no open batch, show "The Mandi is currently closed" state.
    If open, fetch batch products.
    Group products by Farmer.
    Render `FarmerGroup` sections.
  </action>
  <verify>npm run build</verify>
  <done>Page renders batch status correctly</done>
</task>

<task type="auto">
  <name>Task 3: Product Card Component</name>
  <files>web/src/components/shop/ProductCard.tsx</files>
  <action>Display product image (placeholder), name, farmer name, unit, price per unit, and description. Show "Min Qty: X".</action>
  <verify>Visual check</verify>
  <done>Product details visible</done>
</task>
</tasks>

<verification>
- [ ] Shop page loads current batch
- [ ] Products grouped by farmer
- [ ] Closed state handled gracefully
</verification>

<success_criteria>
- Buyer can see products when batch is OPEN
</success_criteria>

<output>
After completion, create `.planning/phases/07-ordering/07-02-SUMMARY.md`
</output>
