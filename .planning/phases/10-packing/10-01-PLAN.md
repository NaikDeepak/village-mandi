# Plan 10-01: Packing API & UI

## Objective
Implement the backend logic for generating packing lists and the frontend UI for managing the packing process.

## Tasks

### 1. Database & Schema Updates
- [ ] Add `PACKED` and `DISTRIBUTED` to `OrderStatus` enum in `schema.prisma`.
- [ ] Run `npx prisma generate`.

### 2. Backend Implementation
- [ ] Create `server/src/routes/packing.ts`.
- [ ] Implement `GET /batches/:id/packing` endpoint.
  - Filter: Only `FULLY_PAID` (or `PACKED`) orders.
  - Return: List of buyers with their order items and status.
- [ ] Implement `PATCH /orders/:id/status` for quick status updates (`PACKED`, `DISTRIBUTED`).
- [ ] Register packing routes in `server/index.ts`.
- [ ] Add integration tests in `server/src/routes/packing.test.ts`.

### 3. Frontend Implementation
- [ ] Add packing-related API calls to `web/src/lib/api.ts`.
- [ ] Create `web/src/pages/admin/BatchPackingPage.tsx`.
  - List of all buyers in the batch with items to pack.
  - Quick action to mark an order as "Packed".
  - Filter by fulfillment type (Pickup vs Delivery).
- [ ] Add "Packing List" link to `BatchDetailPage`.
- [ ] Implement print-optimized buyer packing slips.

### 4. Verification
- [ ] `npm run lint`
- [ ] `npm run test --workspace=server`
- [ ] Manual verification of packing workflow.

## Success Criteria
- [ ] Admin can view a consolidated packing list for a batch.
- [ ] Admin can mark individual orders as `PACKED`.
- [ ] Packing slips can be printed for individual buyers.
- [ ] Only `FULLY_PAID` orders are shown in the packing list.
